{"remainingRequest":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\src\\components\\Company\\UserCompanyList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\src\\components\\Company\\UserCompanyList.vue","mtime":1562748057079},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport CompanyService from \"../../ApiService/CompanyService\";\nimport Component from \"../../Plugins/Component\";\nimport UserService from \"../../ApiService/UserService\";\nexport default {\n  name: \"UserCompanyList\",\n  data: function data() {\n    return {\n      user: \"\",\n      companylist: [],\n      oldmanagerlist: []\n    };\n  },\n  created: function created() {\n    debugger;\n    this.$store.commit('setmainpage', 'AnaSayfa');\n    this.$store.commit('setsubpage', 'Kullanıcı Firmaları');\n    this.$store.commit('setbreadcrumbtitle', 'Kullanıcı Firmaları');\n    this.getmyuserlist();\n  },\n  methods: {\n    cancalmanageredit: function cancalmanageredit(item) {\n      item.disabled = !item.disabled;\n\n      for (var j = 0; j < this.companylist.length; j++) {\n        this.companylist[j].manager = this.oldmanagerlist[j].manager;\n        this.companylist[j].submanager = this.oldmanagerlist[j].submanager;\n      }\n    },\n    savemanageredit: function savemanageredit(item) {\n      var _this = this;\n\n      debugger;\n      var ischanged = false;\n\n      if (item.disabled == true) {\n        item.disabled = false;\n      } else {\n        for (var j = 0; j < this.companylist.length; j++) {\n          debugger;\n\n          if (this.companylist[j].manager != this.oldmanagerlist[j].manager || this.companylist[j].submanager != this.oldmanagerlist[j].submanager) {\n            ischanged = true;\n            break;\n          } else {\n            ischanged = false;\n          }\n        }\n\n        debugger;\n\n        if (ischanged) {\n          debugger; //yetki güncellenecek api den\n\n          var editedauth;\n\n          if (item.submanager === true) {\n            editedauth = 0;\n          } else {\n            editedauth = 1;\n          }\n\n          debugger;\n          CompanyService.editmanager({\n            data: {\n              kullaniciId: this.$store.getters.getuser.kullaniciId,\n              userToken: this.$store.getters.getuser.userToken,\n              yoneticiId: this.user.kullaniciId,\n              methodName: \"yoneticiGuncelle\",\n              firmaList: [{\n                firmaId: item.firmaId,\n                yetkiSeviye: editedauth\n              }]\n            }\n          }).then(function (res) {\n            if (res.status === 200) {\n              Component.showalert(\"Yetki Seviysi Başarıyla Değiştirildi\", \"success\", \"Tamam\");\n\n              _this.getcompany();\n            } else {\n              Component.showalert(res.msg, \"error\", \"Tamam\");\n            }\n\n            debugger;\n          });\n        } else {\n          Component.showalert(\"Yönetici Yetkisinde Herhangi Bir Değişiklik Yapılmadı Lütfen Değişik Yapıp Tekrar Deneyin\", \"warning\", \"Tamam\");\n        }\n      }\n    },\n    setmanagercheck: function setmanagercheck(item, index, type) {\n      debugger;\n      var list = JSON.parse(JSON.stringify(this.companylist));\n      this.companylist = [];\n      list.forEach(function (x, i) {\n        if (i === index) {\n          if (type === \"M\") {\n            x.manager = true;\n            x.submanager = false;\n          } else {\n            x.manager = false;\n            x.submanager = true;\n          }\n        }\n      });\n      this.companylist = list;\n    },\n    getmyuserlist: function getmyuserlist() {\n      var _this2 = this;\n\n      var BreakException = {};\n      var userid = this.$route.params.userid;\n      UserService.createduserlist({\n        data: {\n          kullaniciId: this.$store.getters.getuser.kullaniciId,\n          userToken: this.$store.getters.getuser.userToken,\n          methodName: \"olusturulanList\"\n        }\n      }).then(function (res) {\n        debugger;\n\n        if (res.status === 200) {\n          var isuser = false;\n          debugger;\n\n          for (var i = 0; i < res.data.length; i++) {\n            if (res.data[i].kullaniciId == userid) {\n              isuser = true;\n              _this2.user = res.data[i];\n              break;\n            } else {\n              isuser = false;\n            }\n          }\n\n          if (isuser != true) {\n            _this2.$router.push(\"/Olusturulankisiler\");\n          } else {\n            _this2.getcompany();\n          }\n        } else {\n          Component.showalert(res.msg, \"error\", \"Tamam\");\n\n          _this2.$router.push(\"/Olusturulankisiler\");\n        }\n      });\n    },\n    removemanageruser: function removemanageruser(item, index) {\n      var _this3 = this;\n\n      debugger;\n      var name = this.user.adSoyad;\n      var title = item.yetkiSeviye == '1' ? 'Yöneticiyi' : 'Personeli';\n      swal({\n        title: name + ' ' + 'Adlı' + title + ' ' + '    ' + ' Silmek İstediğinize Emin Misiniz ?',\n        icon: 'warning',\n        buttons: ['Hayır', 'Evet'],\n        dangerMode: true\n      }).then(function (willDelete) {\n        if (willDelete) {\n          CompanyService.removamanager({\n            data: {\n              kullaniciId: _this3.$store.getters.getuser.kullaniciId,\n              userToken: _this3.$store.getters.getuser.userToken,\n              yonetimId: item.yonetimId,\n              methodName: 'yoneticiKaldir'\n            }\n          }).then(function (res) {\n            if (res.status == 200) {\n              debugger;\n\n              _this3.companylist.splice(index, 1);\n\n              Component.showalert(res.msg, 'success', 'Tamam');\n            } else {\n              Component.showalert(res.msg, 'error', 'Tamam');\n            }\n          });\n        }\n      });\n    },\n    editmanager: function editmanager(item) {\n      item.disabled = !item.disabled;\n    },\n    getcompany: function getcompany() {\n      var _this4 = this;\n\n      CompanyService.getmanagerlist({\n        data: {\n          kullaniciId: this.$store.getters.getuser.kullaniciId,\n          userToken: this.$store.getters.getuser.userToken,\n          methodName: \"kullaniciFirmalari\",\n          yoneticiId: this.$route.params.userid\n        }\n      }).then(function (res) {\n        if (res.status === 200) {\n          res.data.forEach(function (x) {\n            if (x.yetkiSeviye === \"1\") {\n              x.manager = true;\n              x.submanager = false;\n            } else {\n              x.manager = false;\n              x.submanager = true;\n            }\n\n            x.disabled = true;\n          });\n          _this4.oldmanagerlist = JSON.parse(JSON.stringify(res.data));\n          _this4.companylist = res.data;\n        } else {\n          Component.showalert(res.msg, \"error\", \"Tamam\");\n\n          _this4.$router.push(\"/Olusturulankisiler\");\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["UserCompanyList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"page-inner\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <div class=\"card-title\">{{user.adSoyad}} Adlı Kullanıcıya  Oluşturulan  Firmaların Listesi </div>\r\n          </div>\r\n          <div class=\"card-body table-responsive\">\r\n            <table class=\"table table-hover\">\r\n              <thead>\r\n              <tr>\r\n                <th>Firma No</th>\r\n                <th>Firma Adı</th>\r\n                <th>Vergi Numarası</th>\r\n                <th>Yetki Seviyesi</th>\r\n                <th>İşlemler</th>\r\n              </tr>\r\n              </thead>\r\n              <tbody><br>\r\n              <tr v-for=\"(item,index) in companylist\" >\r\n                <td>{{item.firmaId}}</td>\r\n                <td>{{item.firmaAdi}} </td>\r\n                <td>{{item.vergiNo}} </td>\r\n                <td> <label v-if=\"item.disabled\">{{item.yetkiSeviye=='1'?'Yönetici':'Personel'}}</label>\r\n\r\n                  <div class=\"demo-checkbox\" v-if=\"!item.disabled\">\r\n                    <input type=\"checkbox\" v-model=\"item.manager\"> <label  @click=\"setmanagercheck(item,index,'M')\">Yönetici</label>\r\n                    <input type=\"checkbox\" v-model=\"item.submanager\"> <label @click=\"setmanagercheck(item,index,'S')\">Alt Yönetici</label>\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <div class=\"button-group\">\r\n\r\n\r\n                    <button class=\"btn  btn-danger\"\r\n                            v-if=\"item.disabled\"\r\n                            @mouseup=\"removemanageruser(item,index)\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Yöneticiyi Sil\" >  <i class=\"fas fa-trash\"></i>  </button>\r\n                    <button class=\"btn  btn-warning\"\r\n                            v-if=\"item.disabled\"\r\n                            @mouseup=\"editmanager(item,index)\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Yönetici Yetkisini Değiştir\" >  <i class=\"fas fa-edit\"></i>  </button>\r\n\r\n\r\n\r\n                    <button class=\"btn btn-success\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Kaydet\" v-if=\"!item.disabled\" @mouseup=\"savemanageredit(item)\"> <i class=\"fa fa-save\"></i> </button>\r\n                    <button class=\"btn btn-danger\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"İptal Et\" v-if=\"!item.disabled\" @mouseup=\"cancalmanageredit(item)\"> <i class=\"fas fa-times\"></i> </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import CompanyService from '../../ApiService/CompanyService'\r\n  import Component from '../../Plugins/Component'\r\n  import UserService from '../../ApiService/UserService'\r\n    export default {\r\n        name: \"UserCompanyList\",\r\n      data(){\r\n          return{\r\n            user:\"\",\r\n            companylist:[],\r\n            oldmanagerlist:[]\r\n          }\r\n      },\r\n      created() {\r\n          debugger\r\n        this.$store.commit('setmainpage', 'AnaSayfa')\r\n        this.$store.commit('setsubpage', 'Kullanıcı Firmaları')\r\n        this.$store.commit('setbreadcrumbtitle', 'Kullanıcı Firmaları')\r\n        this.getmyuserlist();\r\n      },\r\n      methods:{\r\n        cancalmanageredit(item){\r\n          item.disabled=!item.disabled\r\n          for (let j = 0; j <this.companylist.length ; j++) {\r\n            this.companylist[j].manager=this.oldmanagerlist[j].manager\r\n            this.companylist[j].submanager=this.oldmanagerlist[j].submanager\r\n          }\r\n        },\r\n        savemanageredit(item){\r\n          debugger\r\n          var ischanged=false;\r\n          if(item.disabled==true){\r\n            item.disabled=false\r\n          }else{\r\n            for (let j = 0; j <this.companylist.length ; j++) {\r\n              debugger\r\n              if(this.companylist[j].manager!=this.oldmanagerlist[j].manager\r\n                || this.companylist[j].submanager!=this.oldmanagerlist[j].submanager\r\n              ){\r\n                ischanged=true\r\n                break;\r\n              }else{\r\n                ischanged=false\r\n              }\r\n            }\r\n            debugger\r\n            if(ischanged){\r\n              debugger\r\n              //yetki güncellenecek api den\r\n              var editedauth;\r\n              if(item.submanager===true){\r\n                editedauth=0\r\n              }else{\r\n                editedauth=1\r\n              }\r\n              debugger\r\n              CompanyService.editmanager(\r\n                {\r\n                  data:{\r\n                    kullaniciId: this.$store.getters.getuser.kullaniciId,\r\n                    userToken: this.$store.getters.getuser.userToken,\r\n                    yoneticiId: this.user.kullaniciId,\r\n                    methodName: \"yoneticiGuncelle\",\r\n                    firmaList:[{\r\n                      firmaId: item.firmaId,\r\n                      yetkiSeviye:editedauth\r\n                    }]\r\n                  }\r\n                }\r\n              ).then((res)=>{\r\n                if(res.status===200){\r\n\r\n                  Component.showalert(\"Yetki Seviysi Başarıyla Değiştirildi\",\"success\",\"Tamam\")\r\n                this.getcompany()\r\n                }else{\r\n                  Component.showalert(res.msg,\"error\",\"Tamam\")\r\n                }\r\n                debugger\r\n              })\r\n            }else{\r\n              Component.showalert(\"Yönetici Yetkisinde Herhangi Bir Değişiklik Yapılmadı Lütfen Değişik Yapıp Tekrar Deneyin\",\"warning\",\"Tamam\")\r\n            }\r\n          }\r\n        },\r\n        setmanagercheck(item,index,type){\r\n          debugger\r\n          const list=JSON.parse(JSON.stringify(this.companylist))\r\n          this.companylist=[]\r\n          list.forEach((x,i)=>{\r\n            if(i===index){\r\n              if(type===\"M\"){\r\n                x.manager=true\r\n                x.submanager=false\r\n              }\r\n              else{\r\n                x.manager=false\r\n                x.submanager=true\r\n              }\r\n\r\n            }\r\n          })\r\n          this.companylist=list\r\n        },\r\n          getmyuserlist(){\r\n            var BreakException = {};\r\n          let  userid=this.$route.params.userid\r\n            UserService.createduserlist({\r\n              data:{\r\n                kullaniciId: this.$store.getters.getuser.kullaniciId,\r\n                userToken: this.$store.getters.getuser.userToken,\r\n                methodName: \"olusturulanList\"\r\n              }\r\n            }).then((res)=>{\r\n              debugger\r\n              if(res.status===200){\r\n                var isuser=false;\r\n                debugger\r\n                for (let i = 0; i <res.data.length ; i++) {\r\n                  if(res.data[i].kullaniciId==userid){\r\n                    isuser=true\r\n                    this.user=res.data[i]\r\n                    break\r\n                  }else{\r\n                    isuser=false\r\n                  }\r\n                }\r\n                if(isuser!=true){\r\n                  this.$router.push(\"/Olusturulankisiler\");\r\n                }\r\n              else{\r\n                this.getcompany()\r\n                }\r\n              }else {\r\n                Component.showalert(res.msg,\"error\",\"Tamam\")\r\n                this.$router.push(\"/Olusturulankisiler\");\r\n              }\r\n            })\r\n          },\r\n        removemanageruser (item, index) {\r\n          debugger\r\n          const name = this.user.adSoyad\r\n          const title = item.yetkiSeviye == '1' ? 'Yöneticiyi' : 'Personeli'\r\n          swal({\r\n            title: name + ' ' + 'Adlı' + title + ' ' + '    ' + ' Silmek İstediğinize Emin Misiniz ?',\r\n            icon: 'warning',\r\n            buttons: ['Hayır', 'Evet'],\r\n            dangerMode: true\r\n          })\r\n            .then((willDelete) => {\r\n              if (willDelete) {\r\n                CompanyService.removamanager(\r\n                  {\r\n                    data: {\r\n                      kullaniciId: this.$store.getters.getuser.kullaniciId,\r\n                      userToken: this.$store.getters.getuser.userToken,\r\n                      yonetimId: item.yonetimId,\r\n                      methodName: 'yoneticiKaldir'\r\n                    }\r\n                  }\r\n                ).then((res) => {\r\n                  if (res.status == 200) {\r\n                    debugger\r\n                    this.companylist.splice(index, 1)\r\n                    Component.showalert(res.msg, 'success', 'Tamam')\r\n                  } else {\r\n                    Component.showalert(res.msg, 'error', 'Tamam')\r\n                  }\r\n                })\r\n              }\r\n            })\r\n        },\r\n        editmanager(item){\r\n          item.disabled=!item.disabled\r\n        },\r\n          getcompany(){\r\n            CompanyService.getmanagerlist(\r\n              {\r\n                data:{\r\n                  kullaniciId: this.$store.getters.getuser.kullaniciId,\r\n                  userToken: this.$store.getters.getuser.userToken,\r\n                  methodName: \"kullaniciFirmalari\",\r\n                  yoneticiId:this.$route.params.userid\r\n                }\r\n              }\r\n            ).then((res)=>{\r\n              if(res.status===200){\r\n                res.data.forEach((x)=>{\r\n                  if(x.yetkiSeviye===\"1\"){\r\n                    x.manager=true\r\n                    x.submanager=false\r\n                  }else{\r\n                    x.manager=false\r\n                    x.submanager=true\r\n                  }\r\n                  x.disabled=true\r\n                })\r\n                this.oldmanagerlist=JSON.parse(JSON.stringify(res.data))\r\n                this.companylist=res.data\r\n              }else{\r\n                Component.showalert(res.msg,\"error\",\"Tamam\")\r\n                this.$router.push(\"/Olusturulankisiler\");\r\n              }\r\n            })\r\n          }\r\n      }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/Company"}]}