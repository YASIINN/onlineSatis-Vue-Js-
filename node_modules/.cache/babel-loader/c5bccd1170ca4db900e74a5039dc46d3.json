{"remainingRequest":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\src\\components\\Company\\CompanyList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\src\\components\\Company\\CompanyList.vue","mtime":1562655524688},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport CompanyService from \"../../ApiService/CompanyService\";\nimport Component from \"../../Plugins/Component\";\nimport swal from 'sweetalert';\nexport default {\n  data: function data() {\n    return {\n      companylist: [],\n      selectedcompany: [],\n      managerlist: [],\n      oldmanagerlist: [],\n      activecompany: \"\"\n    };\n  },\n  methods: {\n    cancalmanageredit: function cancalmanageredit(item) {\n      item.disabled = !item.disabled;\n\n      for (var j = 0; j < this.managerlist.length; j++) {\n        this.managerlist[j].manager = this.oldmanagerlist[j].manager;\n        this.managerlist[j].submanager = this.oldmanagerlist[j].submanager;\n      }\n    },\n    savemanageredit: function savemanageredit(item) {\n      var _this2 = this;\n\n      debugger;\n      var ischanged = false;\n\n      if (item.disabled == true) {\n        item.disabled = false;\n      } else {\n        for (var j = 0; j < this.managerlist.length; j++) {\n          debugger;\n\n          if (this.managerlist[j].manager != this.oldmanagerlist[j].manager || this.managerlist[j].submanager != this.oldmanagerlist[j].submanager) {\n            ischanged = true;\n            break;\n          } else {\n            ischanged = false;\n          }\n        }\n\n        debugger;\n\n        if (ischanged) {\n          debugger; //yetki güncellenecek api den\n\n          var editedauth;\n\n          if (item.submanager === true) {\n            editedauth = 0;\n          } else {\n            editedauth = 1;\n          }\n\n          debugger;\n          CompanyService.editmanager({\n            data: {\n              kullaniciId: this.$store.getters.getuser.kullaniciId,\n              userToken: this.$store.getters.getuser.userToken,\n              yoneticiId: item.kullaniciId,\n              methodName: \"yoneticiGuncelle\",\n              firmaList: [{\n                firmaId: this.activecompany.firmaId,\n                yetkiSeviye: editedauth\n              }]\n            }\n          }).then(function (res) {\n            if (res.status === 200) {\n              Component.showalert(\"Yetki Seviysi Başarıyla Değiştirildi\", \"success\", \"Tamam\");\n\n              _this2.showmanagerlist(_this2.activecompany);\n            } else {\n              Component.showalert(res.msg, \"error\", \"Tamam\");\n            }\n\n            debugger;\n          });\n          /*\n            PayTermService.addpayterm(\n              {\n                data:{\n                  kullaniciId: this.$store.getters.getuser.kullaniciId,\n                  userToken: this.$store.getters.getuser.userToken,\n                  donemId:item.odemeDonemId,\n                  odemeDetay:item.detay,\n                  methodName: \"donemDuzenle\"\n                }\n              }\n            ).then((res)=>{\n              if(res.status==200){\n                item.disabled=!item.disabled\n                item.detay=res.data.detay.toUpperCase()\n                Component.showalert(\"Yönetici Yetkisi Başarıyla Güncellendi\",\"success\",\"Tamam\")\n              }else{\n                Component.showalert(res.msg,\"error\",\"Tamam\")\n              }\n            })*/\n        } else {\n          Component.showalert(\"Yönetici Yetkisinde Herhangi Bir Değişiklik Yapılmadı Lütfen Değişik Yapıp Tekrar Deneyin\", \"warning\", \"Tamam\");\n        }\n      }\n    },\n    setmanagercheck: function setmanagercheck(item, index, type) {\n      debugger;\n      var list = JSON.parse(JSON.stringify(this.managerlist));\n      this.managerlist = [];\n      list.forEach(function (x, i) {\n        if (i === index) {\n          if (type === \"M\") {\n            x.manager = true;\n            x.submanager = false;\n          } else {\n            x.manager = false;\n            x.submanager = true;\n          }\n        }\n      });\n      this.managerlist = list;\n    },\n    editmanager: function editmanager(item) {\n      item.disabled = !item.disabled;\n    },\n    removemanageruser: function removemanageruser(item, index) {\n      var _this3 = this;\n\n      debugger;\n      var name = item.adSoyad;\n      var title = item.yetkiSeviye == '1' ? 'Yöneticiyi' : 'Personeli';\n      swal({\n        title: name + ' ' + 'Adlı' + title + ' ' + '    ' + ' Silmek İstediğinize Emin Misiniz ?',\n        icon: 'warning',\n        buttons: ['Hayır', 'Evet'],\n        dangerMode: true\n      }).then(function (willDelete) {\n        if (willDelete) {\n          CompanyService.removamanager({\n            data: {\n              kullaniciId: _this3.$store.getters.getuser.kullaniciId,\n              userToken: _this3.$store.getters.getuser.userToken,\n              yonetimId: item.yonetimId,\n              methodName: 'yoneticiKaldir'\n            }\n          }).then(function (res) {\n            if (res.status == 200) {\n              _this3.managerlist.splice(index, 1);\n\n              Component.showalert(res.msg, 'success', 'Tamam');\n            } else {\n              Component.showalert('Kullanıcı Silinirken Hata Gerçekleşti', 'error', 'Tamam');\n            }\n          });\n        }\n      });\n    },\n    removemanagerlist: function removemanagerlist() {\n      this.selectedcompany = [];\n      this.managerlist = [];\n      this.activecompany = \"\";\n    },\n    showmanagerlist: function showmanagerlist(param) {\n      var _this4 = this;\n\n      debugger;\n\n      var _this = this;\n\n      this.selectedcompany = param;\n      this.activecompany = param;\n      CompanyService.getmanagerlist({\n        'data': {\n          kullaniciId: this.$store.getters.getuser.kullaniciId,\n          userToken: this.$store.getters.getuser.userToken,\n          firmaId: param.firmaId,\n          methodName: 'firmaYonetimList'\n        }\n      }).then(function (res) {\n        if (res && res.data && res.data.length) {\n          debugger;\n          var result = res.data.filter(function (x) {\n            if (x.yetkiSeviye === \"1\") {\n              x.manager = true;\n              x.submanager = false;\n            } else {\n              x.manager = false;\n              x.submanager = true;\n            }\n\n            x.disabled = true;\n            return x.kullaniciId != _this.$store.getters.getuser.kullaniciId;\n          });\n          _this4.oldmanagerlist = JSON.parse(JSON.stringify(result));\n          result.length > 0 ? _this4.managerlist = result : _this4.managerlist = [];\n        } else {\n          _this4.managerlist = [];\n        }\n      });\n    },\n    getcompanylist: function getcompanylist() {\n      var _this5 = this;\n\n      CompanyService.getcompanylist({\n        'data': {\n          kullaniciId: this.$store.getters.getuser.kullaniciId,\n          userToken: this.$store.getters.getuser.userToken,\n          methodName: 'firmalarim'\n        }\n      }).then(function (res) {\n        if (res && res.data && res.data.length) {\n          _this5.companylist = res.data;\n        } else {\n          _this5.companylist = [];\n        }\n      });\n    }\n  },\n  created: function created() {\n    console.log(this.$store.getters.isAuthenticated);\n    this.$store.commit('setmainpage', 'AnaSayfa');\n    this.$store.commit('setsubpage', 'Firmalar');\n    this.$store.commit('setbreadcrumbtitle', 'Firmalar');\n    this.getcompanylist();\n  }\n};",{"version":3,"sources":["CompanyList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"page-inner\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <div class=\"card-title\">Firma Listesi</div>\n          </div>\n          <div class=\"card-body table-responsive\">\n            <table class=\"table table-hover\">\n              <thead>\n              <tr>\n                <th>Firma No</th>\n                <th>Firma Adı</th>\n                <th>Vergi Numarası</th>\n                <th>İşlemler</th>\n              </tr>\n              </thead>\n              <tbody>\n              <br>\n              <tr v-for=\"item in companylist\">\n                <td>{{item.firmaId}}</td>\n                <td>{{item.firmaAdi}}</td>\n                <td>{{item.vergiNo}}</td>\n                <td>\n                <div class=\"button-group\">\n                  <button class=\"btn  btn-info\"  @mouseup=\"showmanagerlist(item)\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Yönetici Listesini Görüntüle\" >  <i class=\"fas fa-eye\"></i>  </button>\n                </div>\n                 </td>\n              </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\" v-if=\"selectedcompany.firmaAdi\">\n      <div class=\"col-md-12\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <div class=\"card-title\">{{selectedcompany.firmaAdi}} Yönetici Listesi  <label style=\"float: right; color: red;cursor: pointer\" class=\"fas fa-window-close\" @mouseup=\"removemanagerlist\"></label>  </div>\n          </div>\n          <div class=\"card-body table-responsive\">\n            <table class=\"table table-hover\">\n              <thead>\n              <tr>\n                <th>Ad Soyad</th>\n                <th>TC</th>\n                <th>Yetki Seviyesi</th>\n                <th>İşlemler</th>\n              </tr>\n              </thead>\n\n              <tbody>\n              <br>\n\n              <tr v-for=\"(item,index) in managerlist\">\n                <td>{{item.adSoyad}}</td>\n                <td>{{item.tcNo}}</td>\n                <td>\n                  <label v-if=\"item.disabled\">{{item.yetkiSeviye=='1'?\"Yönetici\":\"Personel\"}}</label>\n                  <div class=\"demo-checkbox\" v-if=\"!item.disabled\">\n                    <input type=\"checkbox\" v-model=\"item.manager\"> <label  @click=\"setmanagercheck(item,index,'M')\">Yönetici</label>\n                    <input type=\"checkbox\" v-model=\"item.submanager\"> <label @click=\"setmanagercheck(item,index,'S')\">Alt Yönetici</label>\n                  </div>\n                </td>\n                <td>\n\n                  <div class=\"button-group\">\n\n\n                    <button class=\"btn  btn-danger\"\n                            v-if=\"item.disabled\"\n                            @mouseup=\"removemanageruser(item,index)\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Yöneticiyi Sil\" >  <i class=\"fas fa-trash\"></i>  </button>\n                    <button class=\"btn  btn-warning\"\n                            v-if=\"item.disabled\"\n                            @mouseup=\"editmanager(item,index)\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Yönetici Yetkisini Değiştir\" >  <i class=\"fas fa-edit\"></i>  </button>\n\n\n\n                    <button class=\"btn btn-success\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Kaydet\" v-if=\"!item.disabled\" @mouseup=\"savemanageredit(item)\"> <i class=\"fa fa-save\"></i> </button>\n                    <button class=\"btn btn-danger\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"İptal Et\" v-if=\"!item.disabled\" @mouseup=\"cancalmanageredit(item)\"> <i class=\"fas fa-times\"></i> </button>\n                  </div>\n\n               </td>\n              </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CompanyService from '../../ApiService/CompanyService'\nimport Component from '../../Plugins/Component'\nimport swal from 'sweetalert'\nexport default {\n  data () {\n    return {\n      companylist: [],\n      selectedcompany: [],\n      managerlist: [],\n      oldmanagerlist:[],\n      activecompany:\"\"\n    }\n  },\n  methods: {\n    cancalmanageredit(item){\n      item.disabled=!item.disabled\n      for (let j = 0; j <this.managerlist.length ; j++) {\n        this.managerlist[j].manager=this.oldmanagerlist[j].manager\n        this.managerlist[j].submanager=this.oldmanagerlist[j].submanager\n      }\n    },\n    savemanageredit(item){\n      debugger\n      var ischanged=false;\n      if(item.disabled==true){\n        item.disabled=false\n      }else{\n        for (let j = 0; j <this.managerlist.length ; j++) {\n          debugger\n          if(this.managerlist[j].manager!=this.oldmanagerlist[j].manager\n          || this.managerlist[j].submanager!=this.oldmanagerlist[j].submanager\n          ){\n            ischanged=true\n            break;\n          }else{\n            ischanged=false\n          }\n        }\n        debugger\n        if(ischanged){\n          debugger\n //yetki güncellenecek api den\n          var editedauth;\n          if(item.submanager===true){\n            editedauth=0\n          }else{\n            editedauth=1\n          }\n          debugger\n          CompanyService.editmanager(\n            {\n              data:{\n                kullaniciId: this.$store.getters.getuser.kullaniciId,\n                userToken: this.$store.getters.getuser.userToken,\n                yoneticiId: item.kullaniciId,\n                methodName: \"yoneticiGuncelle\",\n                firmaList:[{\n                  firmaId: this.activecompany.firmaId,\n                  yetkiSeviye:editedauth\n                }]\n              }\n            }\n          ).then((res)=>{\n            if(res.status===200){\n\n              Component.showalert(\"Yetki Seviysi Başarıyla Değiştirildi\",\"success\",\"Tamam\")\n                this.showmanagerlist(\n                this.activecompany)\n            }else{\n              Component.showalert(res.msg,\"error\",\"Tamam\")\n            }\n            debugger\n          })\n          /*\n            PayTermService.addpayterm(\n              {\n                data:{\n                  kullaniciId: this.$store.getters.getuser.kullaniciId,\n                  userToken: this.$store.getters.getuser.userToken,\n                  donemId:item.odemeDonemId,\n                  odemeDetay:item.detay,\n                  methodName: \"donemDuzenle\"\n                }\n              }\n            ).then((res)=>{\n              if(res.status==200){\n                item.disabled=!item.disabled\n                item.detay=res.data.detay.toUpperCase()\n                Component.showalert(\"Yönetici Yetkisi Başarıyla Güncellendi\",\"success\",\"Tamam\")\n              }else{\n                Component.showalert(res.msg,\"error\",\"Tamam\")\n              }\n            })*/\n\n\n        }else{\n          Component.showalert(\"Yönetici Yetkisinde Herhangi Bir Değişiklik Yapılmadı Lütfen Değişik Yapıp Tekrar Deneyin\",\"warning\",\"Tamam\")\n        }\n      }\n    },\n    setmanagercheck(item,index,type){\n      debugger\n      const list=JSON.parse(JSON.stringify(this.managerlist))\n      this.managerlist=[]\n      list.forEach((x,i)=>{\n        if(i===index){\n          if(type===\"M\"){\n            x.manager=true\n            x.submanager=false\n          }\n          else{\n            x.manager=false\n            x.submanager=true\n          }\n\n        }\n      })\n      this.managerlist=list\n    },\n    editmanager(item){\n      item.disabled=!item.disabled\n    },\n    removemanageruser (item, index) {\n      debugger\n      const name = item.adSoyad\n      const title = item.yetkiSeviye == '1' ? 'Yöneticiyi' : 'Personeli'\n      swal({\n        title: name + ' ' + 'Adlı' + title + ' ' + '    ' + ' Silmek İstediğinize Emin Misiniz ?',\n        icon: 'warning',\n        buttons: ['Hayır', 'Evet'],\n        dangerMode: true\n      })\n        .then((willDelete) => {\n          if (willDelete) {\n            CompanyService.removamanager(\n              {\n                data: {\n                  kullaniciId: this.$store.getters.getuser.kullaniciId,\n                  userToken: this.$store.getters.getuser.userToken,\n                  yonetimId: item.yonetimId,\n                  methodName: 'yoneticiKaldir'\n                }\n              }\n            ).then((res) => {\n              if (res.status == 200) {\n                this.managerlist.splice(index, 1)\n                Component.showalert(res.msg, 'success', 'Tamam')\n              } else {\n                Component.showalert('Kullanıcı Silinirken Hata Gerçekleşti', 'error', 'Tamam')\n              }\n            })\n          }\n        })\n\n    },\n    removemanagerlist () {\n      this.selectedcompany = []\n      this.managerlist = []\n      this.activecompany=\"\"\n    },\n    showmanagerlist (param) {\n      debugger\n      const _this = this\n      this.selectedcompany = param\n\n      this.activecompany=param\n      CompanyService.getmanagerlist(\n        {\n          'data': {\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            firmaId: param.firmaId,\n            methodName: 'firmaYonetimList'\n          }\n        }\n      ).then((res) => {\n        if (res && res.data && res.data.length) {\n          debugger\n          const result = res.data.filter((x) => {\n            if(x.yetkiSeviye===\"1\"){\n              x.manager=true\n              x.submanager=false\n            }else{\n              x.manager=false\n              x.submanager=true\n            }\n            x.disabled=true\n            return x.kullaniciId != _this.$store.getters.getuser.kullaniciId\n          })\n          this.oldmanagerlist=JSON.parse(JSON.stringify(result))\n          result.length > 0 ? this.managerlist = result : this.managerlist = []\n        } else { this.managerlist = [] }\n      })\n    },\n    getcompanylist () {\n      CompanyService.getcompanylist(\n        {\n          'data': {\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            methodName: 'firmalarim'\n          }\n        }\n      ).then((res) => {\n        if (res && res.data && res.data.length) {\n          this.companylist = res.data\n        } else { this.companylist = [] }\n      })\n    }\n  },\n  created () {\n    console.log(this.$store.getters.isAuthenticated)\n\n    this.$store.commit('setmainpage', 'AnaSayfa')\n    this.$store.commit('setsubpage', 'Firmalar')\n    this.$store.commit('setbreadcrumbtitle', 'Firmalar')\n    this.getcompanylist()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/components/Company"}]}