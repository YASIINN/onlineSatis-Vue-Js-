{"remainingRequest":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\src\\components\\Company\\AddUserCompany.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\src\\components\\Company\\AddUserCompany.vue","mtime":1562751504647},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Component from '../../Plugins/Component'\nimport CompanyService from '../../ApiService/CompanyService'\nimport UserService from '../../ApiService/UserService'\nimport Multiselect from 'vue-multiselect'\n  export default {\n      name: \"AddUserCompany\",\n    data(){\n      return{\n        optionss: [],\n        value: [],\n        selectedcompany:[],\n        myuserlist:[],\n        user:\"\"\n      }\n    },\n    created() {\n        debugger\n      this.$store.commit('setmainpage', 'Oluşturdugum Kullanıcılar')\n      this.$store.commit('setsubpage', 'Firma Ata')\n      this.$store.commit('setbreadcrumbtitle', 'Firma Ata')\n        this.getmyuserlist();\n    this.getcompanylist()\n    },\n    methods:{\n      addcompanytouser(){\n        if(this.selectedcompany.length) {\n          const companylist=[]\n          this.selectedcompany.forEach((x) => {\n            companylist.push({\n              firmaId: x.firmaId,\n              yetkiSeviye: x.manager == true ? 1 : 0,\n            })\n          })\n\n          CompanyService.editmanager({\n            data:{\n              kullaniciId: this.$store.getters.getuser.kullaniciId,\n              userToken: this.$store.getters.getuser.userToken,\n              yoneticiId:this.$route.params.userid,\n              firmaList:companylist,\n              methodName: \"yoneticiGuncelle\"\n            }\n          }).then((res)=>{\n            if(res.status===200){\n              this.value=[]\n              this.selectedcompany=[]\n\n              debugger\n              Component.showalert(\"Firma Atama İşlemi Başarıyla Gerçekleşti\",\"success\",\"Tamam\")\n            }else{\n              Component.showalert(res.msg,\"error\",\"Tamam\")\n            }\n          })\n        }else{\n          Component.showalert(\"Lütfen Firma Seçimi Yapınız\",\"error\",\"Tamam\")\n        }\n      },\n      getmyuserlist(){\n        debugger\n        UserService.createduserlist({\n          data:{\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            methodName: \"olusturulanList\"\n          }\n        }).then((res)=>{\n          if(res.status===200){\n            var isuser=false;\n            debugger\n            for (let i = 0; i <res.data.length ; i++) {\n              if(res.data[i].kullaniciId==this.$route.params.userid){\n                isuser=true\n                this.user=res.data[i];\n                break\n              }else{\n                isuser=false\n\n              }\n            }\n\n            if(isuser!=true){\n              this.$router.push(\"/Olusturulankisiler\");\n            }\n            this.myuserlist=res.data\n          }else {\n            this.$router.push(\"/Olusturulankisiler\");\n            Component.showalert(res.msg,\"error\",\"Tamam\")\n          }\n        })\n      },\n      removecompany(param){\n        this.selectedcompany= this.selectedcompany.filter((x)=>{\n          return x.firmaId!=param.firmaId\n        })\n      },\n      companychange(item){\n        item.submanager=true\n        item.manager=false\n        this.selectedcompany.push(item)\n      },\n      setmanagercheck(item,index,type){\n        const companies=JSON.parse(JSON.stringify(this.selectedcompany))\n        this.selectedcompany=[]\n        companies.forEach((x,i)=>{\n          if(i===index){\n            if(type===\"M\"){\n              x.manager=true\n              x.submanager=false\n            }\n            else{\n              x.manager=false\n              x.submanager=true\n            }\n          }\n        })\n        this.selectedcompany=companies\n      },\n      getcompanylist(){\n        CompanyService.getcompanylist(\n          {\n            'data': {\n              kullaniciId: this.$store.getters.getuser.kullaniciId,\n              userToken: this.$store.getters.getuser.userToken,\n              methodName: 'firmalarim'\n            }\n          }\n        ).then((res) => {\n          if (res && res.data && res.data.length) {\n\n            this.optionss = res.data\n          } else { this.optionss = [] }\n        })\n      },\n    },\n    components:{\n        Multiselect\n    }\n  }\n",{"version":3,"sources":["AddUserCompany.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddUserCompany.vue","sourceRoot":"src/components/Company","sourcesContent":["<template>\r\n  <div class=\"page-inner\">\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"card card-outline-info\">\r\n          <div class=\"card-header\">\r\n            <h4 class=\"m-b-0 text-white\"> {{user.adSoyad}} 'Adlı Kullanıcı'ya ' Firma Ata</h4>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"form-body\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-12\">\r\n                  <div class=\"form-group\">\r\n                    <label class=\"control-label\">Şirket Seçiniz</label>\r\n                    <multiselect v-model=\"value\" :options=\"optionss\" :multiple=\"true\"\r\n                                 :close-on-select=\"false\"\r\n                                 :clear-on-select=\"false\" :preserve-search=\"false\"\r\n                                 select-label=\"Seç\"\r\n                                 selected-label=\"Seçili\"\r\n                                 deselect-label=\"Seçimi Kaldır\"\r\n                                 @select=\"companychange\"\r\n                                 @remove=\"removecompany\"\r\n                                 :searchable=\"false\"\r\n                                 placeholder=\"Şirket Seçiniz\" label=\"firmaAdi\" track-by=\"firmaAdi\" :preselect-first=\"false\">\r\n                      <template slot=\"selection\"\r\n                                slot-scope=\"{ values, search, isOpen }\"><span class=\"multiselect__single\" v-if=\"values.length &amp;&amp; !isOpen\">\r\n              {{ values.length }} Şirket Seçildi\r\n                </span>  </template>\r\n                    </multiselect>\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\" v-if=\"selectedcompany.length\">\r\n                <div class=\"col-md-12\">\r\n                  <div class=\"card\">\r\n                    <div class=\"card-body table-responsive\">\r\n                      <h4 class=\"card-title m-t-40\">Yetki Listesi</h4>\r\n                      <div class=\"demo-checkbox\">\r\n                        <input type=\"checkbox\" id=\"md_checkbox_1\"  checked />\r\n                        <label for=\"md_checkbox_1\">Red</label>\r\n                      </div>\r\n                      <div class=\"demo-checkbox\">\r\n                        <input type=\"checkbox\" id=\"md_checkbox_2\"  checked />\r\n                        <label for=\"md_checkbox_2\">Red</label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\" v-if=\"selectedcompany.length\">\r\n                <div class=\"col-md-12\">\r\n                  <div class=\"card\">\r\n                    <div class=\"card-body table-responsive\">\r\n                      <table class=\"table table-hover\">\r\n                        <thead>\r\n                        <tr >\r\n                          <th>Şirket Adı </th>\r\n                          <th>Yetki Seviyesi</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr v-for=\"(item,i) in selectedcompany\" >\r\n                          <td>{{item.firmaAdi}}</td>\r\n                          <td>\r\n\r\n                            <div class=\"demo-checkbox\">\r\n                              <input type=\"checkbox\" v-model=\"item.manager\"> <label  @click=\"setmanagercheck(item,i,'M')\">Yönetici</label>\r\n                              <input type=\"checkbox\" v-model=\"item.submanager\"> <label @click=\"setmanagercheck(item,i,'S')\">Alt Yönetici</label>\r\n\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div style=\"float:right\">\r\n              <button type=\"button\" class=\"btn btn-success\" @mouseup=\"addcompanytouser\" ><i class=\"fa fa-check\"></i> Kaydet\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n  import Component from '../../Plugins/Component'\r\n  import CompanyService from '../../ApiService/CompanyService'\r\n  import UserService from '../../ApiService/UserService'\r\n  import Multiselect from 'vue-multiselect'\r\n    export default {\r\n        name: \"AddUserCompany\",\r\n      data(){\r\n        return{\r\n          optionss: [],\r\n          value: [],\r\n          selectedcompany:[],\r\n          myuserlist:[],\r\n          user:\"\"\r\n        }\r\n      },\r\n      created() {\r\n          debugger\r\n        this.$store.commit('setmainpage', 'Oluşturdugum Kullanıcılar')\r\n        this.$store.commit('setsubpage', 'Firma Ata')\r\n        this.$store.commit('setbreadcrumbtitle', 'Firma Ata')\r\n          this.getmyuserlist();\r\n      this.getcompanylist()\r\n      },\r\n      methods:{\r\n        addcompanytouser(){\r\n          if(this.selectedcompany.length) {\r\n            const companylist=[]\r\n            this.selectedcompany.forEach((x) => {\r\n              companylist.push({\r\n                firmaId: x.firmaId,\r\n                yetkiSeviye: x.manager == true ? 1 : 0,\r\n              })\r\n            })\r\n\r\n            CompanyService.editmanager({\r\n              data:{\r\n                kullaniciId: this.$store.getters.getuser.kullaniciId,\r\n                userToken: this.$store.getters.getuser.userToken,\r\n                yoneticiId:this.$route.params.userid,\r\n                firmaList:companylist,\r\n                methodName: \"yoneticiGuncelle\"\r\n              }\r\n            }).then((res)=>{\r\n              if(res.status===200){\r\n                this.value=[]\r\n                this.selectedcompany=[]\r\n\r\n                debugger\r\n                Component.showalert(\"Firma Atama İşlemi Başarıyla Gerçekleşti\",\"success\",\"Tamam\")\r\n              }else{\r\n                Component.showalert(res.msg,\"error\",\"Tamam\")\r\n              }\r\n            })\r\n          }else{\r\n            Component.showalert(\"Lütfen Firma Seçimi Yapınız\",\"error\",\"Tamam\")\r\n          }\r\n        },\r\n        getmyuserlist(){\r\n          debugger\r\n          UserService.createduserlist({\r\n            data:{\r\n              kullaniciId: this.$store.getters.getuser.kullaniciId,\r\n              userToken: this.$store.getters.getuser.userToken,\r\n              methodName: \"olusturulanList\"\r\n            }\r\n          }).then((res)=>{\r\n            if(res.status===200){\r\n              var isuser=false;\r\n              debugger\r\n              for (let i = 0; i <res.data.length ; i++) {\r\n                if(res.data[i].kullaniciId==this.$route.params.userid){\r\n                  isuser=true\r\n                  this.user=res.data[i];\r\n                  break\r\n                }else{\r\n                  isuser=false\r\n\r\n                }\r\n              }\r\n\r\n              if(isuser!=true){\r\n                this.$router.push(\"/Olusturulankisiler\");\r\n              }\r\n              this.myuserlist=res.data\r\n            }else {\r\n              this.$router.push(\"/Olusturulankisiler\");\r\n              Component.showalert(res.msg,\"error\",\"Tamam\")\r\n            }\r\n          })\r\n        },\r\n        removecompany(param){\r\n          this.selectedcompany= this.selectedcompany.filter((x)=>{\r\n            return x.firmaId!=param.firmaId\r\n          })\r\n        },\r\n        companychange(item){\r\n          item.submanager=true\r\n          item.manager=false\r\n          this.selectedcompany.push(item)\r\n        },\r\n        setmanagercheck(item,index,type){\r\n          const companies=JSON.parse(JSON.stringify(this.selectedcompany))\r\n          this.selectedcompany=[]\r\n          companies.forEach((x,i)=>{\r\n            if(i===index){\r\n              if(type===\"M\"){\r\n                x.manager=true\r\n                x.submanager=false\r\n              }\r\n              else{\r\n                x.manager=false\r\n                x.submanager=true\r\n              }\r\n            }\r\n          })\r\n          this.selectedcompany=companies\r\n        },\r\n        getcompanylist(){\r\n          CompanyService.getcompanylist(\r\n            {\r\n              'data': {\r\n                kullaniciId: this.$store.getters.getuser.kullaniciId,\r\n                userToken: this.$store.getters.getuser.userToken,\r\n                methodName: 'firmalarim'\r\n              }\r\n            }\r\n          ).then((res) => {\r\n            if (res && res.data && res.data.length) {\r\n\r\n              this.optionss = res.data\r\n            } else { this.optionss = [] }\r\n          })\r\n        },\r\n      },\r\n      components:{\r\n          Multiselect\r\n      }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}