{"remainingRequest":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\src\\components\\User\\NewUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\src\\components\\User\\NewUser.vue","mtime":1562311949558},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatis-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Component from '../../Plugins/Component'\nimport StaticService from '../../ApiService/StaticService'\nimport CompanyService from '../../ApiService/CompanyService'\nimport Multiselect from 'vue-multiselect'\nimport Validation from '../../Plugins/Validation'\nimport md5 from 'md5'\nexport default {\n  created () {\n    this.getcity()\n    this.getcompanylist()\n    this.$store.commit('setmainpage', 'AnaSayfa')\n    this.$store.commit('setsubpage', 'Yeni Kullanıcı Oluştur')\n    this.$store.commit('setbreadcrumbtitle', 'Yeni Kullanıcı Oluştur')\n  },\n  data () {\n    return {\n      ne: true,\n      selected: '0',\n      selectedistrict: '0',\n      district: [{ ilceId: '0', baslik: 'İlçe Seçiniz' }],\n      options: [],\n      value: [],\n      selectedcompany:[],\n      selecttype: '',\n      passwordstrong: 0,\n      passwordmsg: '',\n      optionss: [\n      ],\n      validation: {\n        usermail: '',\n        username: '',\n        userlastname: '',\n        tc: '',\n        password: '',\n        confirmpassword: '',\n        city: '',\n        district: '',\n        adress: '',\n        phone: ''\n      },\n      user: {\n        usermail: '',\n        username: '',\n        userlastname: '',\n        tc: '',\n        password: '',\n        confirmpassword: '',\n        city: '',\n        district: '',\n        adress: '',\n        phone: ''\n      }\n    }\n  },\n  components: {\n    Multiselect\n  },\n  methods: {\n    checkpasswords(){\n\n      if (\n        this.user.password.trim() == '' ||\n        this.user.password.trim().length < 8\n\n      ) {\n        this.validation.confirmpassword = 'is-invalid'\n        this.validation.password = 'is-invalid'\n      } else if (\n        this.user.confirmpassword.trim() == '' ||\n        this.user.confirmpassword.trim().length < 8\n      ) {\n        this.validation.confirmpassword = 'is-invalid'\n        this.validation.password = 'is-invalid'\n      } else if (this.user.password.trim() !=\n        this.user.confirmpassword.trim()) {\n        this.validation.password = 'is-invalid'\n        this.validation.confirmpassword = 'is-invalid'\n        this.ne = !this.ne\n      } else {\n        this.validation.password = 'is-valid'\n        this.validation.confirmpassword = 'is-valid'\n      }\n\n    },\n    pswstranger () {\n      // buraya bakılacak\n      if (Component.passwordstronger(this.user.password) != undefined) {\n        if (Component.passwordstronger(this.user.password) == 'Zayıf') {\n          this.passwordstrong = 33.3\n          this.passwordmsg = 'Zayıf'\n        } else if (Component.passwordstronger(this.user.password) == 'Orta') {\n          this.passwordmsg = 'Orta'\n          this.passwordstrong = 66.6\n        } else if (Component.passwordstronger(this.user.password) == 'Yüksek') {\n          this.passwordmsg = 'Yüksek'\n          this.passwordstrong = 100\n        }\n      }\n    },\n    setmanagercheck(item,index,type){\n      const companies=JSON.parse(JSON.stringify(this.selectedcompany))\n      this.selectedcompany=[]\n      companies.forEach((x,i)=>{\n        if(i===index){\n          if(type===\"M\"){\n            x.manager=true\n            x.submanager=false\n          }\n          else{\n            x.manager=false\n            x.submanager=true\n          }\n\n        }\n      })\n      this.selectedcompany=companies\n    },\n    removecompany(param){\n      this.selectedcompany= this.selectedcompany.filter((x)=>{\n        return x.firmaId!=param.firmaId\n      })\n    },\n    getcompanylist(){\n      CompanyService.getcompanylist(\n        {\n          'data': {\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            methodName: 'firmalarim'\n          }\n        }\n      ).then((res) => {\n        if (res && res.data && res.data.length) {\n\n          this.optionss = res.data\n        } else { this.optionss = [] }\n      })\n    },\n    getcity () {\n      StaticService.gettallcity({\n        data: {\n          methodName: 'il'\n        }\n      }).then(res => {\n        if (res.data) {\n          this.options = res.data\n          this.options.unshift({ ilId: '0', baslik: 'Şehir Seçiniz' })\n        }\n      })\n    },\n    citychange (param) {\n      this.selectedistrict = 0\n      StaticService.getdistrict({\n        data: {\n          methodName: 'ilce',\n          ilId: param\n        }\n      }).then(res => {\n        if (res.data) {\n          this.district = res.data\n          this.district.unshift({ ilceId: '0', baslik: 'İlçe Seçiniz' })\n        }\n      })\n    },\n    companychange(item){\n      item.submanager=true\n      item.manager=false\n      this.selectedcompany.push(item)\n    },\n    cleardatamodel(){\n      this.selectedcompany=[],\n      this.validation=  {\n        usermail: '',\n          username: '',\n          userlastname: '',\n          tc: '',\n          password: '',\n          confirmpassword: '',\n          city: '',\n          district: '',\n          adress: '',\n          phone: ''\n      },\n        this.user={\n          usermail: '',\n          username: '',\n          userlastname: '',\n          tc: '',\n          password: '',\n          confirmpassword: '',\n          city: '',\n          district: '',\n          adress: '',\n          phone: ''\n        }\n    },\n    addnewuser(){\n      const companylist=[]\n      if(this.selectedcompany.length){\n        this.selectedcompany.forEach((x)=>{\n          companylist.push({\n            firmaId:x.firmaId,\n            yetkiSeviye:x.manager==true?1:0,\n          })\n        })\n        CompanyService.addcompanyuser({\n          data:{\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            tur:1,\n            tcNo:this.user.tc,\n            adSoyad:this.user.username.toUpperCase()+ \" \"+ this.user.userlastname,\n            kullaniciAdi:this.user.usermail,\n            sifre:md5(this.user.confirmpassword),\n            adres:this.user.adress.toUpperCase(),\n            il:this.selected,\n            ilce:this.selectedistrict,\n            telefon:this.user.phone,\n            telefon2:\"\",\n            firmaList:companylist,\n            methodName: \"yoneticiTanimla\"\n          }\n        }).then((res)=>{\n          if(res.status==200){\n\n            Component.showalert(\"İşlem Başarıyla Gerçekleşti\",\"success\",\"Tamam\")\n          }else{\n            Component.showalert(\"İşlem Sırasında Bir Hata Gerçekleşti Lütfen Daha Sonra Tekrar Deneyin\",\"error\",\"Tamam\")\n          }\n        })\n      }else{\n        CompanyService.addcompanyuser({\n          data:{\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            tur:1,\n            tcNo:this.user.tc,\n            adSoyad:this.user.username.toUpperCase()+ \" \"+ this.user.userlastname,\n            kullaniciAdi:this.user.usermail,\n            sifre:md5(this.user.confirmpassword),\n            adres:this.user.adress.toUpperCase(),\n            il:this.selected,\n            ilce:this.selectedistrict,\n            telefon:this.user.phone,\n            telefon2:\"\",\n            methodName: \"yoneticiTanimla\"\n\n          }\n        }).then((res)=>{\n            if(res.status==200){\n                Component.showalert(\"İşlem Başarıyla Gerçekleşti\",\"success\",\"Tamam\")\n            }else{\n              Component.showalert(\"İşlem Sırasında Bir Hata Gerçekleşti Lütfen Daha Sonra Tekrar Deneyin\",\"error\",\"Tamam\")\n            }\n        })\n      }\n    },\n    checkvalidate () {\n      if (\n        Component.validateemail(this.user.usermail) == false) {\n        Component.showalert('Lütfen Form Verilerinizi Kontrol Ediniz', 'error', 'Tamam')\n        this.validation.usermail = 'is-invalid'\n      } else {\n        this.validation.usermail = 'is-valid'\n      }\n      this.validation.username = Validation.checkvalidate(this.user.username, \"<\", 3);\n\n      this.validation.userlastname = Validation.checkvalidate(this.user.userlastname,\"<\",\"1\")\n\n      /* if  (!Component.checktc(this.registermodel.tcno)){\n                this.validation.tcno=\"is-invalid\"\n              }\n              else{\n                this.validation.tcno=\"is-valid\"\n              } */\n\n      if (\n        this.user.password.trim() == '' ||\n          this.user.password.trim().length < 8\n\n      ) {\n        Component.showalert('Lütfen Form Verilerinizi Kontrol Ediniz', 'error', 'Tamam')\n        this.validation.confirmpassword = 'is-invalid'\n        this.validation.password = 'is-invalid'\n      } else if (\n        this.user.confirmpassword.trim() == '' ||\n          this.user.confirmpassword.trim().length < 8\n      ) {\n        Component.showalert('Lütfen Form Verilerinizi Kontrol Ediniz', 'error', 'Tamam')\n        this.validation.confirmpassword = 'is-invalid'\n        this.validation.password = 'is-invalid'\n      } else if (this.user.password.trim() !=\n          this.user.confirmpassword.trim()) {\n        Component.showalert('Lütfen Form Verilerinizi Kontrol Ediniz', 'error', 'Tamam')\n        this.validation.password = 'is-invalid'\n        this.validation.confirmpassword = 'is-invalid'\n        this.ne = !this.ne\n      } else {\n        this.validation.password = 'is-valid'\n        this.validation.confirmpassword = 'is-valid'\n      }\n      this.validation.city = Validation.checkvalidate(this.selected, \"=\", \"\", 0)\n      this.validation.district = Validation.checkvalidate(this.selectedistrict, \"=\", \"\", 0)\n      this.validation.adress = Validation.checkvalidate(this.user.adress)\n      this.validation.phone = Validation.checkvalidate(this.user.phone, \"<\", 10)\n      if(this.validation.usermail==\"is-valid\" && this.validation.username==\"is-valid\" && this.validation.userlastname==\"is-valid\" &&\n    /*  this.validation.tcno==\"is-valid\" &&*/ this.validation.password==\"is-valid\" && this.validation.confirmpassword==\"is-valid\" &&\n    this.validation.city==\"is-valid\" && this.validation.district==\"is-valid\" && this.validation.adress==\"is-valid\" && this.validation.phone==\"is-valid\"\n      ){\n        this.addnewuser();\n      }\n    }\n  }\n}\n",{"version":3,"sources":["NewUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewUser.vue","sourceRoot":"src/components/User","sourcesContent":["<template>\n  <div class=\"page-inner\">\n    <div class=\"row\">\n      <div class=\"col-lg-12\">\n        <div class=\"card card-outline-info\">\n          <div class=\"card-header\">\n            <h4 class=\"m-b-0 text-white\">Yeni Kullanıcı Oluştur</h4>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"form-body\">\n              <h3 class=\"card-title\">Kullanıcı Bilgileri</h3>\n              <hr>\n              <div class=\"row p-t-20\">\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n\n                    <label class=\"control-label\">Kullanıcı Adı *</label>\n                    <input type=\"text\" id=\"firstName\"\n                           :class=\"validation.usermail\"\n                           class=\"form-control\" v-model=\"user.usermail\" placeholder=\"example@domain.com\">\n                    <div class=\"invalid-feedback\">\n                      LÜTFEN GEÇERLİ BİR EMAİL ADRESİ GİRİNİZ ÖRN: ahmet@gmail.com\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-md-12\">\n                  <div class=\"form-group \">\n\n                    <label class=\"control-label\">Adı*</label>\n                    <input type=\"text\"\n                           :class=\"validation.username\"\n                           v-model=\"user.username\" id=\"lastName\" class=\"form-control form-control-danger\"\n                           placeholder=\"Adı\">\n                    <div class=\"invalid-feedback\">\n                      AD ALANI 3 KARAKTERDEN AZ VE SAYISAL DEĞER İÇEREMEZ\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <!--/row-->\n              <div class=\"row\">\n                <div class=\"col-md-12\">\n                  <!--has-success-->\n                  <div class=\"form-group \">\n                    <label class=\"control-label\">SoyAdı *</label>\n                    <input type=\"text\"\n                           placeholder=\"SoyAdı\"\n                           :class=\"validation.userlastname\"\n                           v-model=\"user.userlastname\" class=\"form-control form-control-danger\" >\n                    <div class=\"invalid-feedback\">\n                      SOYAD ALANI 3 KARAKTERDEN AZ VE SAYISAL DEĞER İÇEREMEZ\n                    </div>\n\n                  </div>\n                </div>\n\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n                    <label>TC No </label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      :class=\"validation.tcno\"\n                      onkeypress=\"return event.charCode >= 48 && event.charCode <= 57\"\n                      minlength=\"11\"\n                      maxlength=\"11\"\n                      v-model=\"user.tc\"\n                      placeholder=\"TC No *\"\n                    >\n                    <div class=\"invalid-feedback\">\n                      LÜTFEN GEÇERLİ BİR TC NO GİRİNİZ\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n                    <label>Parola </label>\n                    <input\n                      type=\"password\"\n                      class=\"form-control\"\n                      :class=\"validation.password\"\n                      v-model=\"user.password\"\n                      placeholder=\"Parola *\"\n                      @keyup=\"pswstranger\"\n                    >\n                    <div v-if=\"ne\" class=\"invalid-feedback\">\n                      PAROLANIZ 8 KARAKTERDEN KÜÇÜK OLAMAZ\n                    </div>\n                    <br><br><br>\n                    <label v-if=\"user.password\">Parola Güvenlik Seviyesi {{passwordmsg}}</label>\n                    <div class=\"col-12\" v-if=\"user.password\">\n                      <div class=\"progress\">\n                        <div class=\"progress-bar bg-success\" role=\"progressbar\"\n                             :style=\"{width: passwordstrong  +'%'}\"\n                             style=\" height: 6px;\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n                    <label>Parola Tekrarı</label>\n                    <input\n                      type=\"password\"\n                      v-on:blur=\"checkpasswords\"\n                      class=\"form-control\"\n                      :class=\"validation.confirmpassword\"\n                      v-model=\"user.confirmpassword\"\n                      placeholder=\"Parola Tekrarı *\"\n                    >\n                    <div v-if=\"ne\" class=\"invalid-feedback\">\n                      PAROLANIZ 8 KARAKTERDEN KÜÇÜK OLAMAZ\n                    </div>\n                    <div v-if=\"!ne\" class=\"invalid-feedback\">\n                      PAROLALAR EŞLEŞMİYOR\n                    </div>\n                  </div>\n                </div>\n\n                <!--/span-->\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n                    <label>İl </label>\n                    <select class=\"form-control\"\n                            :class=\"validation.city\"\n                            @change=\"citychange(selected)\" v-model=\"selected\">\n                      <option\n                        v-for=\"option in options\"\n                        :disabled=\"option.ilId==0\"\n                        v-bind:value=\"option.ilId\"\n                      >{{ option.baslik }}\n                      </option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                      LÜTFEN İL SEÇİNİZ\n                    </div>\n                  </div>\n                  <div class=\"form-group\">\n                    <label>İlçe </label>\n                    <select class=\"form-control\"\n                            :class=\"validation.district\"\n                            v-model=\"selectedistrict\">\n                      <option\n                        class=\"hidden\"\n                        v-for=\"item in district\"\n                        :disabled=\"item.ilceId==0\"\n                        :selected=\"item.ilceId==0\"\n                        v-bind:value=\"item.ilceId\"\n                      >{{ item.baslik }}\n                      </option>\n                    </select>\n                    <div class=\"invalid-feedback\">\n                      LÜTFEN İLÇE SEÇİNİZ\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n                    <label class=\"comment\">Adres *</label>\n                    <textarea class=\"form-control\"\n                              :class=\"validation.adress\"\n                              v-model=\"user.adress\" rows=\"5\" placeholder=\"Teknokent\"\n                              id=\"comment\"></textarea>\n                    <div class=\"invalid-feedback\">\n                      LÜTFEN   GEÇERLİ BİR ADRES GİRİNİZ\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"row\">\n              <div class=\"col-md-12\">\n                <div class=\"form-group\">\n                  <label class=\"control-label\">Telefon Numarası *</label>\n                  <the-mask :mask=\"'(####)-###-##-##'\"  class=\"form-control\"  placeholder=\"(0555)-555-55-55\"\n                            :value=\"user.phone\"\n                            :class=\"validation.phone\"\n                            v-model=\"user.phone\"\n                  />\n\n\n\n                  <div class=\"invalid-feedback\">\n                    LÜTFEN   GEÇERLİ BİR TELEFON NUMARASI GİRİNİZ\n                  </div>\n                </div>\n              </div>\n            </div>\n\n              <div class=\"row\">\n                <div class=\"col-md-12\">\n                  <div class=\"form-group\">\n                    <label class=\"control-label\">Şirket Seçiniz</label>\n                    <multiselect v-model=\"value\" :options=\"optionss\" :multiple=\"true\"\n                                 :close-on-select=\"false\"\n                                 :clear-on-select=\"false\" :preserve-search=\"false\"\n                                 select-label=\"Seç\"\n                                 selected-label=\"Seçili\"\n                                 deselect-label=\"Seçimi Kaldır\"\n                                 @select=\"companychange\"\n                                 @remove=\"removecompany\"\n                                 :searchable=\"false\"\n                                 placeholder=\"Şirket Seçiniz\" label=\"firmaAdi\" track-by=\"firmaAdi\" :preselect-first=\"false\">\n                      <template slot=\"selection\"\n                                slot-scope=\"{ values, search, isOpen }\"><span class=\"multiselect__single\" v-if=\"values.length &amp;&amp; !isOpen\">\n\n              {{ values.length }} Şirket Seçildi\n\n\n                </span>  </template>\n                    </multiselect>\n\n                  </div>\n                </div>\n              </div>\n\n\n\n              <div class=\"row\" v-if=\"selectedcompany.length\">\n                <div class=\"col-md-12\">\n                  <div class=\"card\">\n                    <div class=\"card-body table-responsive\">\n                      <table class=\"table table-hover\">\n                        <thead>\n                        <tr >\n                          <th>Şirket Adı </th>\n                          <th>Yetki Seviyesi</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr v-for=\"(item,i) in selectedcompany\" >\n                          <td>{{item.firmaAdi}}</td>\n                          <td>\n\n                            <div class=\"demo-checkbox\">\n                              <input type=\"checkbox\" v-model=\"item.manager\"> <label  @click=\"setmanagercheck(item,i,'M')\">Yönetici</label>\n                              <input type=\"checkbox\" v-model=\"item.submanager\"> <label @click=\"setmanagercheck(item,i,'S')\">Alt Yönetici</label>\n\n                            </div>\n\n\n\n\n                          <!--   <select class=\"form-control-sm\" v-model=\"item.selecttype\" @change=\"selectchange(item,i)\">\n                              <option :value=\"1\">Yönetici</option>\n                              <option :value=\"0\">Alt Yönetici</option>\n                            </select> -->\n                          </td>\n                        </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div style=\"float:right\">\n              <button type=\"button\" class=\"btn btn-success\" @click=\"checkvalidate\"><i class=\"fa fa-check\"></i> Kaydet\n              </button>\n              <button type=\"button\" class=\"btn btn-inverse\">Vazgeç</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n<script>\nimport Component from '../../Plugins/Component'\nimport StaticService from '../../ApiService/StaticService'\nimport CompanyService from '../../ApiService/CompanyService'\nimport Multiselect from 'vue-multiselect'\nimport Validation from '../../Plugins/Validation'\nimport md5 from 'md5'\nexport default {\n  created () {\n    this.getcity()\n    this.getcompanylist()\n    this.$store.commit('setmainpage', 'AnaSayfa')\n    this.$store.commit('setsubpage', 'Yeni Kullanıcı Oluştur')\n    this.$store.commit('setbreadcrumbtitle', 'Yeni Kullanıcı Oluştur')\n  },\n  data () {\n    return {\n      ne: true,\n      selected: '0',\n      selectedistrict: '0',\n      district: [{ ilceId: '0', baslik: 'İlçe Seçiniz' }],\n      options: [],\n      value: [],\n      selectedcompany:[],\n      selecttype: '',\n      passwordstrong: 0,\n      passwordmsg: '',\n      optionss: [\n      ],\n      validation: {\n        usermail: '',\n        username: '',\n        userlastname: '',\n        tc: '',\n        password: '',\n        confirmpassword: '',\n        city: '',\n        district: '',\n        adress: '',\n        phone: ''\n      },\n      user: {\n        usermail: '',\n        username: '',\n        userlastname: '',\n        tc: '',\n        password: '',\n        confirmpassword: '',\n        city: '',\n        district: '',\n        adress: '',\n        phone: ''\n      }\n    }\n  },\n  components: {\n    Multiselect\n  },\n  methods: {\n    checkpasswords(){\n\n      if (\n        this.user.password.trim() == '' ||\n        this.user.password.trim().length < 8\n\n      ) {\n        this.validation.confirmpassword = 'is-invalid'\n        this.validation.password = 'is-invalid'\n      } else if (\n        this.user.confirmpassword.trim() == '' ||\n        this.user.confirmpassword.trim().length < 8\n      ) {\n        this.validation.confirmpassword = 'is-invalid'\n        this.validation.password = 'is-invalid'\n      } else if (this.user.password.trim() !=\n        this.user.confirmpassword.trim()) {\n        this.validation.password = 'is-invalid'\n        this.validation.confirmpassword = 'is-invalid'\n        this.ne = !this.ne\n      } else {\n        this.validation.password = 'is-valid'\n        this.validation.confirmpassword = 'is-valid'\n      }\n\n    },\n    pswstranger () {\n      // buraya bakılacak\n      if (Component.passwordstronger(this.user.password) != undefined) {\n        if (Component.passwordstronger(this.user.password) == 'Zayıf') {\n          this.passwordstrong = 33.3\n          this.passwordmsg = 'Zayıf'\n        } else if (Component.passwordstronger(this.user.password) == 'Orta') {\n          this.passwordmsg = 'Orta'\n          this.passwordstrong = 66.6\n        } else if (Component.passwordstronger(this.user.password) == 'Yüksek') {\n          this.passwordmsg = 'Yüksek'\n          this.passwordstrong = 100\n        }\n      }\n    },\n    setmanagercheck(item,index,type){\n      const companies=JSON.parse(JSON.stringify(this.selectedcompany))\n      this.selectedcompany=[]\n      companies.forEach((x,i)=>{\n        if(i===index){\n          if(type===\"M\"){\n            x.manager=true\n            x.submanager=false\n          }\n          else{\n            x.manager=false\n            x.submanager=true\n          }\n\n        }\n      })\n      this.selectedcompany=companies\n    },\n    removecompany(param){\n      this.selectedcompany= this.selectedcompany.filter((x)=>{\n        return x.firmaId!=param.firmaId\n      })\n    },\n    getcompanylist(){\n      CompanyService.getcompanylist(\n        {\n          'data': {\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            methodName: 'firmalarim'\n          }\n        }\n      ).then((res) => {\n        if (res && res.data && res.data.length) {\n\n          this.optionss = res.data\n        } else { this.optionss = [] }\n      })\n    },\n    getcity () {\n      StaticService.gettallcity({\n        data: {\n          methodName: 'il'\n        }\n      }).then(res => {\n        if (res.data) {\n          this.options = res.data\n          this.options.unshift({ ilId: '0', baslik: 'Şehir Seçiniz' })\n        }\n      })\n    },\n    citychange (param) {\n      this.selectedistrict = 0\n      StaticService.getdistrict({\n        data: {\n          methodName: 'ilce',\n          ilId: param\n        }\n      }).then(res => {\n        if (res.data) {\n          this.district = res.data\n          this.district.unshift({ ilceId: '0', baslik: 'İlçe Seçiniz' })\n        }\n      })\n    },\n    companychange(item){\n      item.submanager=true\n      item.manager=false\n      this.selectedcompany.push(item)\n    },\n    cleardatamodel(){\n      this.selectedcompany=[],\n      this.validation=  {\n        usermail: '',\n          username: '',\n          userlastname: '',\n          tc: '',\n          password: '',\n          confirmpassword: '',\n          city: '',\n          district: '',\n          adress: '',\n          phone: ''\n      },\n        this.user={\n          usermail: '',\n          username: '',\n          userlastname: '',\n          tc: '',\n          password: '',\n          confirmpassword: '',\n          city: '',\n          district: '',\n          adress: '',\n          phone: ''\n        }\n    },\n    addnewuser(){\n      const companylist=[]\n      if(this.selectedcompany.length){\n        this.selectedcompany.forEach((x)=>{\n          companylist.push({\n            firmaId:x.firmaId,\n            yetkiSeviye:x.manager==true?1:0,\n          })\n        })\n        CompanyService.addcompanyuser({\n          data:{\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            tur:1,\n            tcNo:this.user.tc,\n            adSoyad:this.user.username.toUpperCase()+ \" \"+ this.user.userlastname,\n            kullaniciAdi:this.user.usermail,\n            sifre:md5(this.user.confirmpassword),\n            adres:this.user.adress.toUpperCase(),\n            il:this.selected,\n            ilce:this.selectedistrict,\n            telefon:this.user.phone,\n            telefon2:\"\",\n            firmaList:companylist,\n            methodName: \"yoneticiTanimla\"\n          }\n        }).then((res)=>{\n          if(res.status==200){\n\n            Component.showalert(\"İşlem Başarıyla Gerçekleşti\",\"success\",\"Tamam\")\n          }else{\n            Component.showalert(\"İşlem Sırasında Bir Hata Gerçekleşti Lütfen Daha Sonra Tekrar Deneyin\",\"error\",\"Tamam\")\n          }\n        })\n      }else{\n        CompanyService.addcompanyuser({\n          data:{\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            tur:1,\n            tcNo:this.user.tc,\n            adSoyad:this.user.username.toUpperCase()+ \" \"+ this.user.userlastname,\n            kullaniciAdi:this.user.usermail,\n            sifre:md5(this.user.confirmpassword),\n            adres:this.user.adress.toUpperCase(),\n            il:this.selected,\n            ilce:this.selectedistrict,\n            telefon:this.user.phone,\n            telefon2:\"\",\n            methodName: \"yoneticiTanimla\"\n\n          }\n        }).then((res)=>{\n            if(res.status==200){\n                Component.showalert(\"İşlem Başarıyla Gerçekleşti\",\"success\",\"Tamam\")\n            }else{\n              Component.showalert(\"İşlem Sırasında Bir Hata Gerçekleşti Lütfen Daha Sonra Tekrar Deneyin\",\"error\",\"Tamam\")\n            }\n        })\n      }\n    },\n    checkvalidate () {\n      if (\n        Component.validateemail(this.user.usermail) == false) {\n        Component.showalert('Lütfen Form Verilerinizi Kontrol Ediniz', 'error', 'Tamam')\n        this.validation.usermail = 'is-invalid'\n      } else {\n        this.validation.usermail = 'is-valid'\n      }\n      this.validation.username = Validation.checkvalidate(this.user.username, \"<\", 3);\n\n      this.validation.userlastname = Validation.checkvalidate(this.user.userlastname,\"<\",\"1\")\n\n      /* if  (!Component.checktc(this.registermodel.tcno)){\n                this.validation.tcno=\"is-invalid\"\n              }\n              else{\n                this.validation.tcno=\"is-valid\"\n              } */\n\n      if (\n        this.user.password.trim() == '' ||\n          this.user.password.trim().length < 8\n\n      ) {\n        Component.showalert('Lütfen Form Verilerinizi Kontrol Ediniz', 'error', 'Tamam')\n        this.validation.confirmpassword = 'is-invalid'\n        this.validation.password = 'is-invalid'\n      } else if (\n        this.user.confirmpassword.trim() == '' ||\n          this.user.confirmpassword.trim().length < 8\n      ) {\n        Component.showalert('Lütfen Form Verilerinizi Kontrol Ediniz', 'error', 'Tamam')\n        this.validation.confirmpassword = 'is-invalid'\n        this.validation.password = 'is-invalid'\n      } else if (this.user.password.trim() !=\n          this.user.confirmpassword.trim()) {\n        Component.showalert('Lütfen Form Verilerinizi Kontrol Ediniz', 'error', 'Tamam')\n        this.validation.password = 'is-invalid'\n        this.validation.confirmpassword = 'is-invalid'\n        this.ne = !this.ne\n      } else {\n        this.validation.password = 'is-valid'\n        this.validation.confirmpassword = 'is-valid'\n      }\n      this.validation.city = Validation.checkvalidate(this.selected, \"=\", \"\", 0)\n      this.validation.district = Validation.checkvalidate(this.selectedistrict, \"=\", \"\", 0)\n      this.validation.adress = Validation.checkvalidate(this.user.adress)\n      this.validation.phone = Validation.checkvalidate(this.user.phone, \"<\", 10)\n      if(this.validation.usermail==\"is-valid\" && this.validation.username==\"is-valid\" && this.validation.userlastname==\"is-valid\" &&\n    /*  this.validation.tcno==\"is-valid\" &&*/ this.validation.password==\"is-valid\" && this.validation.confirmpassword==\"is-valid\" &&\n    this.validation.city==\"is-valid\" && this.validation.district==\"is-valid\" && this.validation.adress==\"is-valid\" && this.validation.phone==\"is-valid\"\n      ){\n        this.addnewuser();\n      }\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}