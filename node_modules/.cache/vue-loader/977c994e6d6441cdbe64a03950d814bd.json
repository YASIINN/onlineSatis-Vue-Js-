{"remainingRequest":"C:\\Users\\Yasin\\Desktop\\onlinesatisapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Yasin\\Desktop\\onlinesatisapp\\src\\components\\Company\\CompanyList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatisapp\\src\\components\\Company\\CompanyList.vue","mtime":1562067687810},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatisapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatisapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatisapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Yasin\\Desktop\\onlinesatisapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport CompanyService from '../../ApiService/CompanyService'\nimport Component from '../../Plugins/Component'\nimport swal from 'sweetalert'\nimport { debuglog } from 'util';\nexport default {\n  data () {\n    return {\n      companylist: [],\n      selectedcompany: [],\n      managerlist: []\n    }\n  },\n  methods: {\n    removemanageruser (item, index) {\n      const name = item.adSoyad\n      const title = item.yetkiSeviye == '1' ? 'Yöneticiyi' : 'Personeli'\n      swal({\n        title: name + ' ' + 'Adlı' + title + ' ' + '    ' + ' Silmek İstediğinize Emin Misiniz ?',\n        icon: 'warning',\n        buttons: ['Hayır', 'Evet'],\n        dangerMode: true\n      })\n        .then((willDelete) => {\n          if (willDelete) {\n            CompanyService.removamanager(\n              {\n                data: {\n                  kullaniciId: this.$store.getters.getuser.kullaniciId,\n                  userToken: this.$store.getters.getuser.userToken,\n                  yonetimId: item.yonetimId,\n                  methodName: 'yoneticiKaldır'\n                }\n              }\n            ).then((res) => {\n              if (res.status == 200) {\n                this.managerlist.splice(index, 1)\n                Component.showalert(res.msg, 'success', 'Tamam')\n              } else {\n                Component.showalert('Kullanıcı Silinirken Hata Gerçekleşti', 'error', 'Tamam')\n              }\n            })\n          }\n        })\n      /*\n        if(this.managerlist.length===1){\n          Component.showalert(\"Firmada Başka Yönetici Bulunmadığından Kendinizi Silemezsiniz\",\"error\",\"Tamam\")\n        }\n\n        else{\n          var isown=false\n          if(item.kullaniciId===this.$store.getters.getuser.kullaniciId){\n              isown=true\n          }\n          CompanyService.removamanager(\n            {\n                data:{\n                  kullaniciId: this.$store.getters.getuser.kullaniciId,\n                  userToken: this.$store.getters.getuser.userToken,\n                  yonetimId:item.yonetimId,\n                  methodName: \"yoneticiKaldır\",\n                }\n          }\n          ).then((res)=>{\n            if(res.status==200){\n              this.managerlist.splice(index,1)\n              Component.showalert(res.msg,\"success\",\"Tamam\")\n              if(isown){\n                this.selectedcompany=[]\n                this.managerlist=[]\n                this.getcompanylist()\n              }\n\n            }else{\n              Component.showalert(\"Kullanıcı Silinirken Hata Gerçekleşti\",\"error\",\"Tamam\")\n            }\n          })\n        } */\n    },\n    removemanagerlist () {\n      this.selectedcompany = []\n      this.managerlist = []\n    },\n    showmanagerlist (param) {\n      const _this = this\n      this.selectedcompany = param\n      CompanyService.getmanagerlist(\n        {\n          'data': {\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            firmaId: param.firmaId,\n            methodName: 'firmaYonetimList'\n          }\n        }\n      ).then((res) => {\n        if (res && res.data && res.data.length) {\n          const result = res.data.filter((x) => {\n            return x.kullaniciId != _this.$store.getters.getuser.kullaniciId\n          })\n          result.length > 0 ? this.managerlist = res.data : this.managerlist = []\n        } else { this.managerlist = [] }\n      })\n    },\n    getcompanylist () {\n      debugger\n      CompanyService.getcompanylist(\n        {\n          'data': {\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            methodName: 'firmalarim'\n          }\n        }\n      ).then((res) => {\n        if (res && res.data && res.data.length) {\n          this.companylist = res.data\n        } else { this.companylist = [] }\n      })\n    }\n  },\n  created () {\n    console.log(this.$store.getters.isAuthenticated)\n\n    this.$store.commit('setmainpage', 'AnaSayfa')\n    this.$store.commit('setsubpage', 'Firmalar')\n    this.$store.commit('setbreadcrumbtitle', 'Firmalar')\n    this.getcompanylist()\n  }\n}\n",{"version":3,"sources":["CompanyList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CompanyList.vue","sourceRoot":"src/components/Company","sourcesContent":["<template>\n  <div class=\"page-inner\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <div class=\"card-title\">Firma Listesi</div>\n          </div>\n          <div class=\"card-body table-responsive\">\n            <table class=\"table table-hover\">\n              <thead>\n              <tr>\n                <th>Firma No</th>\n                <th>Firma Adı</th>\n                <th>Vergi Numarası</th>\n                <th>İşlemler</th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr v-for=\"item in companylist\">\n                <td>{{item.firmaId}}</td>\n                <td>{{item.firmaAdi}}</td>\n                <td>{{item.vergiNo}}</td>\n                <td>      <div @mouseup=\"showmanagerlist(item)\" style=\"cursor: pointer\" class=\"label label-table label-info\">Yönetici Listesi Görüntüle</div></td>\n              </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\" v-if=\"selectedcompany.firmaAdi\">\n      <div class=\"col-md-12\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <div class=\"card-title\">{{selectedcompany.firmaAdi}} Yönetici Listesi  <label style=\"float: right; color: red;cursor: pointer\" class=\"fas fa-window-close\" @mouseup=\"removemanagerlist\"></label>  </div>\n          </div>\n          <div class=\"card-body table-responsive\">\n            <table class=\"table table-hover\">\n              <thead>\n              <tr>\n                <th>Ad Soyad</th>\n                <th>TC</th>\n                <th>Yetki Seviyesi</th>\n                <th>İşlemler</th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr v-for=\"(item,index) in managerlist\">\n                <td>{{item.adSoyad}}</td>\n                <td>{{item.tcNo}}</td>\n                <td>{{item.yetkiSeviye=='1'?\"Yönetici\":\"Personel\"}}</td>\n                <td><div @mouseup=\"removemanageruser(item,index)\" style=\"cursor: pointer\" class=\"label label-table label-danger\"> Sil</div></td>\n              </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CompanyService from '../../ApiService/CompanyService'\nimport Component from '../../Plugins/Component'\nimport swal from 'sweetalert'\nimport { debuglog } from 'util';\nexport default {\n  data () {\n    return {\n      companylist: [],\n      selectedcompany: [],\n      managerlist: []\n    }\n  },\n  methods: {\n    removemanageruser (item, index) {\n      const name = item.adSoyad\n      const title = item.yetkiSeviye == '1' ? 'Yöneticiyi' : 'Personeli'\n      swal({\n        title: name + ' ' + 'Adlı' + title + ' ' + '    ' + ' Silmek İstediğinize Emin Misiniz ?',\n        icon: 'warning',\n        buttons: ['Hayır', 'Evet'],\n        dangerMode: true\n      })\n        .then((willDelete) => {\n          if (willDelete) {\n            CompanyService.removamanager(\n              {\n                data: {\n                  kullaniciId: this.$store.getters.getuser.kullaniciId,\n                  userToken: this.$store.getters.getuser.userToken,\n                  yonetimId: item.yonetimId,\n                  methodName: 'yoneticiKaldır'\n                }\n              }\n            ).then((res) => {\n              if (res.status == 200) {\n                this.managerlist.splice(index, 1)\n                Component.showalert(res.msg, 'success', 'Tamam')\n              } else {\n                Component.showalert('Kullanıcı Silinirken Hata Gerçekleşti', 'error', 'Tamam')\n              }\n            })\n          }\n        })\n      /*\n        if(this.managerlist.length===1){\n          Component.showalert(\"Firmada Başka Yönetici Bulunmadığından Kendinizi Silemezsiniz\",\"error\",\"Tamam\")\n        }\n\n        else{\n          var isown=false\n          if(item.kullaniciId===this.$store.getters.getuser.kullaniciId){\n              isown=true\n          }\n          CompanyService.removamanager(\n            {\n                data:{\n                  kullaniciId: this.$store.getters.getuser.kullaniciId,\n                  userToken: this.$store.getters.getuser.userToken,\n                  yonetimId:item.yonetimId,\n                  methodName: \"yoneticiKaldır\",\n                }\n          }\n          ).then((res)=>{\n            if(res.status==200){\n              this.managerlist.splice(index,1)\n              Component.showalert(res.msg,\"success\",\"Tamam\")\n              if(isown){\n                this.selectedcompany=[]\n                this.managerlist=[]\n                this.getcompanylist()\n              }\n\n            }else{\n              Component.showalert(\"Kullanıcı Silinirken Hata Gerçekleşti\",\"error\",\"Tamam\")\n            }\n          })\n        } */\n    },\n    removemanagerlist () {\n      this.selectedcompany = []\n      this.managerlist = []\n    },\n    showmanagerlist (param) {\n      const _this = this\n      this.selectedcompany = param\n      CompanyService.getmanagerlist(\n        {\n          'data': {\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            firmaId: param.firmaId,\n            methodName: 'firmaYonetimList'\n          }\n        }\n      ).then((res) => {\n        if (res && res.data && res.data.length) {\n          const result = res.data.filter((x) => {\n            return x.kullaniciId != _this.$store.getters.getuser.kullaniciId\n          })\n          result.length > 0 ? this.managerlist = res.data : this.managerlist = []\n        } else { this.managerlist = [] }\n      })\n    },\n    getcompanylist () {\n      debugger\n      CompanyService.getcompanylist(\n        {\n          'data': {\n            kullaniciId: this.$store.getters.getuser.kullaniciId,\n            userToken: this.$store.getters.getuser.userToken,\n            methodName: 'firmalarim'\n          }\n        }\n      ).then((res) => {\n        if (res && res.data && res.data.length) {\n          this.companylist = res.data\n        } else { this.companylist = [] }\n      })\n    }\n  },\n  created () {\n    console.log(this.$store.getters.isAuthenticated)\n\n    this.$store.commit('setmainpage', 'AnaSayfa')\n    this.$store.commit('setsubpage', 'Firmalar')\n    this.$store.commit('setbreadcrumbtitle', 'Firmalar')\n    this.getcompanylist()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}